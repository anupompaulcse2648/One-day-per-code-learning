{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\One day per code learning\\\\src\\\\Components\\\\Login\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useRef, useState } from 'react';\nimport { Col, Row } from 'react-bootstrap';\nimport { useForm } from \"react-hook-form\";\nimport { useHistory, useLocation } from 'react-router';\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport firebaseConfig from './firebase.config';\nimport { UserContext } from './../../App';\nimport Headers from '../Headers/Headers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nif (!firebase.apps.length) {\n  firebase.initializeApp(firebaseConfig);\n}\n\nconst Login = () => {\n  _s();\n\n  const [option, setoption] = useState('login');\n  const [user, setUser] = useState({\n    name: '',\n    email: '',\n    password: '',\n    isSignedIn: false,\n    error: ''\n  });\n  const {\n    register,\n    errors,\n    handleSubmit,\n    watch\n  } = useForm({});\n  const password = useRef({});\n  password.current = watch(\"password\", \"\"); // const [loggedInUser, setLoggedInUser] = useContext(UserContext);\n\n  let history = useHistory();\n  let location = useLocation(); // let { from } = location.state || { from: { pathname: \"/devices\" } };\n\n  const signupSubmit = async data => {\n    firebase.auth().createUserWithEmailAndPassword(data.email, data.password).then(userCredential => {\n      var user = userCredential.user;\n      var {\n        displayName,\n        email\n      } = userCredential.user;\n      const userDetails = { ...user\n      };\n      userDetails.name = displayName;\n      userDetails.isSignedIn = true;\n      userDetails.email = email;\n      setUser(userDetails); // setLoggedInUser(userDetails);\n      // history.replace(from);\n\n      updateUserName(data.name);\n      console.log('object', userCredential.user);\n    }).catch(error => {\n      console.log(error.code, error.message);\n      const userDetails = { ...user\n      };\n      userDetails.error = error.message;\n      setUser(userDetails); // setLoggedInUser(userDetails);\n    });\n  };\n\n  const loginSubmit = values => {\n    console.log(values);\n    firebase.auth().signInWithEmailAndPassword(values.email, values.password).then(userCredential => {\n      var user = userCredential.user;\n      var {\n        displayName,\n        email\n      } = userCredential.user;\n      const userDetails = { ...user\n      };\n      userDetails.name = displayName;\n      userDetails.isSignedIn = true;\n      userDetails.email = email;\n      setUser(userDetails); // setLoggedInUser(userDetails);\n      // history.replace(from);\n\n      console.log('signinuser', user);\n    }).catch(error => {\n      console.log(error.code, error.message);\n      const userDetails = { ...user\n      };\n      userDetails.error = error.message;\n      setUser(userDetails); // setLoggedInUser(userDetails);\n    });\n  };\n\n  const updateUserName = name => {\n    var user = firebase.auth().currentUser;\n    user.updateProfile({\n      displayName: name\n    }).then(function () {\n      console.log('Update successful.');\n    }).catch(function (error) {\n      console.log(error.code, error.message);\n    });\n  };\n\n  const signOut = () => {\n    firebase.auth().signOut().then(() => {\n      const signOutUser = { ...user\n      };\n      signOutUser.name = '';\n      signOutUser.email = '';\n      signOutUser.password = '';\n      signOutUser.isSignedIn = false;\n      setUser(signOutUser);\n      setLoggedInUser(signOutUser);\n    }).catch(error => {// An error happened.\n    });\n  };\n\n  console.log('3', user);\n  console.log('login', user.isSignedIn);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-area\",\n    children: loggedInUser.isSignedIn ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"logout-area\",\n      children: [/*#__PURE__*/_jsxDEV(Headers, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logout-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Already Logged In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: signOut,\n          className: \"btn btn-danger\",\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: 7,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-bg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 5,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-content\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"login-main\",\n            children: [option === 'login' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"signIn-area\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \" Sign In\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: handleSubmit(loginSubmit),\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"email\",\n                  placeholder: \"Email\",\n                  className: \"form-control\",\n                  ref: register({\n                    required: \"Required\",\n                    pattern: {\n                      value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n                      message: \"invalid email address\"\n                    }\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    color: '#ff0052'\n                  },\n                  children: errors.email && errors.email.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"password\",\n                  type: \"password\",\n                  placeholder: \"Password\",\n                  className: \"form-control\",\n                  ref: register({\n                    required: \"Reuired\",\n                    minLength: {\n                      value: 8,\n                      message: \"Password must have at least 8 characters\"\n                    }\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    color: '#ff0052'\n                  },\n                  children: errors.password && /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: errors.password.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 101\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    color: '#ff0052'\n                  },\n                  children: [\" \", user.error, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  className: \"btn col btn-primary login-btn\",\n                  children: \"Sign In\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"optional-option\",\n                children: [\"Don\\u2019t have an account?  \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    user.error = '';\n                    setoption('signup');\n                  },\n                  children: \"Sign Up\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 100\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 41\n            }, this), option === 'signup' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"signUp-area\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \" Sign Up\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: e => e.preventDefault(),\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"name\",\n                  placeholder: \"Name\",\n                  className: \"form-control\",\n                  ref: register({\n                    required: true\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    color: '#ff0052'\n                  },\n                  children: errors.name && \"Reuired\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"email\",\n                  placeholder: \"Email\",\n                  className: \"form-control\",\n                  ref: register({\n                    required: \"Required\",\n                    pattern: {\n                      value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n                      message: \"invalid email address\"\n                    }\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    color: '#ff0052'\n                  },\n                  children: [\" \", errors.email && errors.email.message]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"password\",\n                  type: \"password\",\n                  placeholder: \"Password\",\n                  className: \"form-control\",\n                  ref: register({\n                    required: \"You must specify a password\",\n                    minLength: {\n                      value: 8,\n                      message: \"Password must have at least 8 characters\"\n                    }\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    color: '#ff0052'\n                  },\n                  children: errors.password && /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: errors.password.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 101\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 49\n                }, this), \"Atik Diu, [12/23/2021 1:16 AM]\", /*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Confirm Password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"password_repeat\",\n                  type: \"password\",\n                  placeholder: \"Confirm Password\",\n                  className: \"form-control\",\n                  ref: register({\n                    validate: value => value === password.current || \"The passwords do not match\"\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    color: '#ff0052'\n                  },\n                  children: [\" \", errors.password_repeat && /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: errors.password_repeat.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 109\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    color: '#ff0052'\n                  },\n                  children: [\" \", user.error, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"submit\",\n                  onClick: handleSubmit(signupSubmit),\n                  className: \"btn col btn-primary login-btn\",\n                  value: \"Sign Up\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"optional-option\",\n                children: [\"Already have an account?  \", /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    user.error = '';\n                    setoption('login');\n                  },\n                  children: \"Login\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 102\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"KmDSFzbAtGLLEoWD5sHUZ+wqPCs=\", false, function () {\n  return [useForm, useHistory, useLocation];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["D:/Projects/One day per code learning/src/Components/Login/Login.js"],"names":["React","useContext","useRef","useState","Col","Row","useForm","useHistory","useLocation","firebase","firebaseConfig","UserContext","Headers","apps","length","initializeApp","Login","option","setoption","user","setUser","name","email","password","isSignedIn","error","register","errors","handleSubmit","watch","current","history","location","signupSubmit","data","auth","createUserWithEmailAndPassword","then","userCredential","displayName","userDetails","updateUserName","console","log","catch","code","message","loginSubmit","values","signInWithEmailAndPassword","currentUser","updateProfile","signOut","signOutUser","setLoggedInUser","loggedInUser","required","pattern","value","color","minLength","e","preventDefault","validate","password_repeat"],"mappings":"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","sourcesContent":["import React, { useContext, useRef, useState } from 'react';\r\nimport { Col, Row } from 'react-bootstrap';\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useHistory, useLocation } from 'react-router';\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport firebaseConfig from './firebase.config';\r\nimport { UserContext } from './../../App';\r\nimport Headers from '../Headers/Headers';\r\n\r\n\r\nif (!firebase.apps.length) {\r\n    firebase.initializeApp(firebaseConfig);\r\n}\r\n\r\nconst Login = () => {\r\n\r\n    const [option, setoption] = useState('login');\r\n\r\n    const [user, setUser] = useState({\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        isSignedIn: false,\r\n        error: ''\r\n    });\r\n\r\n    const { register, errors, handleSubmit, watch } = useForm({});\r\n    const password = useRef({});\r\n    password.current = watch(\"password\", \"\");\r\n\r\n\r\n    // const [loggedInUser, setLoggedInUser] = useContext(UserContext);\r\n    let history = useHistory();\r\n    let location = useLocation();\r\n    // let { from } = location.state || { from: { pathname: \"/devices\" } };\r\n\r\n    const signupSubmit = async data => {\r\n\r\n        firebase.auth().createUserWithEmailAndPassword(data.email, data.password)\r\n            .then((userCredential) => {\r\n                var user = userCredential.user;\r\n                var { displayName, email } = userCredential.user;\r\n                const userDetails = { ...user }\r\n                userDetails.name = displayName;\r\n                userDetails.isSignedIn = true;\r\n                userDetails.email = email;\r\n                setUser(userDetails);\r\n                // setLoggedInUser(userDetails);\r\n                // history.replace(from);\r\n                updateUserName(data.name);\r\n                console.log('object', userCredential.user);\r\n            })\r\n            .catch((error) => {\r\n                console.log(error.code, error.message);\r\n                const userDetails = { ...user }\r\n                userDetails.error = error.message;\r\n                setUser(userDetails);\r\n                // setLoggedInUser(userDetails);\r\n            });\r\n    };\r\n\r\n\r\n    const loginSubmit = values => {\r\n        console.log(values);\r\n\r\n        firebase.auth().signInWithEmailAndPassword(values.email, values.password)\r\n            .then((userCredential) => {\r\n                var user = userCredential.user;\r\n                var { displayName, email } = userCredential.user;\r\n                const userDetails = { ...user }\r\n                userDetails.name = displayName;\r\n                userDetails.isSignedIn = true;\r\n                userDetails.email = email;\r\n                setUser(userDetails);\r\n                // setLoggedInUser(userDetails);\r\n                // history.replace(from);\r\n                console.log('signinuser', user);\r\n            })\r\n            .catch((error) => {\r\n                console.log(error.code, error.message);\r\n                const userDetails = { ...user }\r\n                userDetails.error = error.message;\r\n                setUser(userDetails);\r\n                // setLoggedInUser(userDetails);\r\n            });\r\n    };\r\n\r\n    const updateUserName = (name) => {\r\n        var user = firebase.auth().currentUser;\r\n\r\n        user.updateProfile({\r\n            displayName: name,\r\n        }).then(function () {\r\n            console.log('Update successful.');\r\n        }).catch(function (error) {\r\n            console.log(error.code, error.message);\r\n        });\r\n    }\r\n\r\n    const signOut = () => {\r\n        firebase.auth().signOut().then(() => {\r\n            const signOutUser = { ...user };\r\n            signOutUser.name = '';\r\n            signOutUser.email = '';\r\n            signOutUser.password = '';\r\n            signOutUser.isSignedIn = false;\r\n            setUser(signOutUser);\r\n            setLoggedInUser(signOutUser)\r\n        }).catch((error) => {\r\n            // An error happened.\r\n        });\r\n    }\r\n\r\n    console.log('3', user);\r\n    console.log('login', user.isSignedIn);\r\n\r\n    return (\r\n        <div className='login-area'>\r\n            {\r\n                loggedInUser.isSignedIn ?\r\n                    <div className='logout-area'>\r\n                        <Headers />\r\n                        <div className='logout-info'>\r\n                            <p>Already Logged In</p>\r\n                            <button onClick={signOut} className=\"btn btn-danger\">Logout</button>\r\n                        </div>\r\n                    </div>\r\n                    :\r\n                    <Row>\r\n                        <Col md={7}>\r\n                            <div className=\"login-bg\">\r\n                            </div>\r\n                        </Col>\r\n                        <Col md={5}>\r\n                            <div className=\"login-content\">\r\n                                {/* <img src={logo} alt=\"\" /> */}\r\n                                <div className=\"login-main\">\r\n\r\n                                    {\r\n                                        option === 'login' &&\r\n                                        <div className=\"signIn-area\">\r\n                                            <h3> Sign In</h3>\r\n                                            <form onSubmit={handleSubmit(loginSubmit)}>\r\n                                                <label>Email</label>\r\n                                                <input\r\n                                                    name=\"email\"\r\n                                                    placeholder=\"Email\"\r\n                                                    className='form-control'\r\n                                                    ref={register({\r\n                                                        required: \"Required\",\r\n                                                        pattern: {\r\n                                                            value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\r\n                                                            message: \"invalid email address\"\r\n                                                        }\r\n                                                    })}\r\n                                                />\r\n                                                <p style={{ color: '#ff0052' }}>{errors.email && errors.email.message}</p>\r\n\r\n                                                <label>Password</label>\r\n                                                <input\r\n                                                    name=\"password\"\r\n                                                    type=\"password\"\r\n                                                    placeholder=\"Password\"\r\n                                                    className='form-control'\r\n                                                    ref={register({\r\n                                                        required: \"Reuired\",\r\n                                                        minLength: {\r\n                                                            value: 8,\r\n                                                            message: \"Password must have at least 8 characters\"\r\n                                                        }\r\n                                                    })}\r\n                                                />\r\n                                                <p style={{ color: '#ff0052' }}>{errors.password && <span>{errors.password.message}</span>}</p>\r\n\r\n                                                <p style={{ color: '#ff0052' }}> {user.error} </p>\r\n\r\n                                                <button type=\"submit\" className='btn col btn-primary login-btn'>Sign In</button>\r\n                                            </form>\r\n\r\n                                            <p className='optional-option'>Don’t have an account?  <button onClick={() => {\r\n                                                user.error = '';\r\n                                                setoption('signup');\r\n                                            }}>\r\n                                                Sign Up</button> </p>\r\n\r\n\r\n                                        </div>\r\n\r\n                                    }\r\n\r\n                                    {\r\n                                        option === 'signup' &&\r\n                                        <div className=\"signUp-area\">\r\n                                            <h3> Sign Up</h3>\r\n\r\n                                            <form onSubmit={e => e.preventDefault()}>\r\n\r\n                                                <label>Name</label>\r\n                                                <input name=\"name\"\r\n                                                    placeholder=\"Name\"\r\n                                                    className='form-control'\r\n                                                    ref={register({ required: true })} />\r\n                                                <p style={{ color: '#ff0052' }}>{errors.name && \"Reuired\"}</p>\r\n\r\n                                                <label>Email</label>\r\n                                                <input\r\n                                                    name=\"email\"\r\n                                                    placeholder=\"Email\"\r\n                                                    className='form-control'\r\n                                                    ref={register({\r\n                                                        required: \"Required\",\r\n                                                        pattern: {\r\n                                                            value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\r\n                                                            message: \"invalid email address\"\r\n                                                        }\r\n                                                    })}\r\n                                                />\r\n                                                <p style={{ color: '#ff0052' }}> {errors.email && errors.email.message}</p>\r\n\r\n                                                <label>Password</label>\r\n                                                <input\r\n                                                    name=\"password\"\r\n                                                    type=\"password\"\r\n                                                    placeholder=\"Password\"\r\n                                                    className='form-control'\r\n                                                    ref={register({\r\n                                                        required: \"You must specify a password\",\r\n                                                        minLength: {\r\n                                                            value: 8,\r\n                                                            message: \"Password must have at least 8 characters\"\r\n                                                        }\r\n                                                    })}\r\n                                                />\r\n                                                <p style={{ color: '#ff0052' }}>{errors.password && <span>{errors.password.message}</span>}</p>\r\n\r\n                                                Atik Diu, [12/23/2021 1:16 AM]\r\n                                                <label>Confirm Password</label>\r\n                                                <input\r\n                                                    name=\"password_repeat\"\r\n                                                    type=\"password\"\r\n                                                    placeholder=\"Confirm Password\"\r\n                                                    className='form-control'\r\n                                                    ref={register({\r\n                                                        validate: value =>\r\n                                                            value === password.current || \"The passwords do not match\"\r\n                                                    })}\r\n                                                />\r\n                                                <p style={{ color: '#ff0052' }}> {errors.password_repeat && <span>{errors.password_repeat.message}</span>}</p>\r\n\r\n                                                <p style={{ color: '#ff0052' }}> {user.error} </p>\r\n\r\n                                                <input type=\"submit\" onClick={handleSubmit(signupSubmit)} className='btn col btn-primary login-btn' value='Sign Up' />\r\n                                            </form>\r\n                                            <p className='optional-option'>Already have an account?  <button onClick={() => {\r\n                                                user.error = '';\r\n                                                setoption('login');\r\n                                            }}>Login</button> </p>\r\n\r\n                                        </div>\r\n                                    }\r\n\r\n                                </div>\r\n                            </div>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}